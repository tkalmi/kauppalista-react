{"version":3,"sources":["../../server/routes/index.js"],"names":["Promise","router","Router","get","req","res","next","sendFile","join","process","env","PWD","NODE_ENV","__dirname","post","save","then","list","redirect","_id","catch","console","error","err"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AAGA;;;;AAKA,mBAASA,OAAT,qB,CAA4B;;AAE5B,IAAMC,SAAS,kBAAQC,MAAR,EAAf;;AAEA;AACAD,OAAOE,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAChCD,QAAIE,QAAJ,CAAa,eAAKC,IAAL,CAAUC,QAAQC,GAAR,CAAYC,GAAtB,EAA2B,YAA3B,CAAb;AACH,CAFD;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACAV,OAAOE,GAAP,CAAW,UAAX,EAAuB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;;AAEvC,QAAIG,QAAQC,GAAR,CAAYE,QAAZ,KAAyB,aAA7B,EAA4C;AAC1CP,YAAIE,QAAJ,CAAa,eAAKC,IAAL,CAAUK,SAAV,EAAqB,sBAArB,CAAb;AACD,KAFD,MAEO;AACLR,YAAIE,QAAJ,CAAa,eAAKC,IAAL,CAAUK,SAAV,EAAqB,kBAArB,CAAb;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CAhBD;;AAkBA;AACAZ,OAAOa,IAAP,CAAY,aAAZ,EAA2B,UAACV,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC3C,8BAAmBS,IAAnB,GACKC,IADL,CACU,UAACC,IAAD,EAAU;AACZZ,YAAIa,QAAJ,OAAiBD,KAAKE,GAAtB;AACH,KAHL,EAIKC,KAJL,CAIW,eAAO;AACVC,gBAAQC,KAAR,CAAcC,GAAd;AACH,KANL;AAOH,CARD;;eAUetB,M;;;;;;;;;kCAhETA,M","file":"index.js","sourcesContent":["import express from 'express';\r\nimport path from 'path';\r\nimport mongoose from 'mongoose';\r\nimport {\r\n    Promise\r\n} from 'bluebird';\r\nimport {\r\n    Item,\r\n    ShoppingList\r\n} from '../models/index';\r\n\r\nmongoose.Promise = Promise; // mongoose's own Promise is deprecated, so replace it with bluebird\r\n\r\nconst router = express.Router();\r\n\r\n// MAIN PAGE GET =====================\r\nrouter.get('/', (req, res, next) => {\r\n    res.sendFile(path.join(process.env.PWD, 'index.html'));\r\n});\r\n\r\n// ITEMS POST =====================\r\n// router.post('/items', (req, res, next) => {\r\n//     // Create new Item and save it\r\n//     let item = new Item({\r\n//         name: req.body.name,\r\n//         quantity: req.body.quantity\r\n//     }).save()\r\n//\r\n//     item.then(() => {\r\n//             return Item.find().exec();\r\n//         })\r\n//         .then((items) => {\r\n//             // return all items after successfully inserting\r\n//             res.json({\r\n//                 message: `Item: ${req.body.name} added successfully!`,\r\n//                 items\r\n//             });\r\n//         })\r\n//         .catch((err) => {\r\n//             res.json({\r\n//                 message: `Something went wrong while adding item: ${req.body.name}\\n Please try again`,\r\n//                 error: true\r\n//             })\r\n//             console.error(err);\r\n//         });\r\n// });\r\n\r\n// LIST GET ======================\r\nrouter.get('/:listID', (req, res, next) => {\r\n\r\n    if (process.env.NODE_ENV === 'development') {\r\n      res.sendFile(path.join(__dirname, '../../index_dev.html'));\r\n    } else {\r\n      res.sendFile(path.join(__dirname, '../../index.html'));\r\n    }\r\n\r\n    // let promise = Item.find().exec();\r\n    // promise.then((items) => {\r\n    //   res.json(items);\r\n    // })\r\n    // .catch((err) => {\r\n    //   res.json({message: `Something went wrong while getting items. Please try again`});\r\n    //   console.error(err);\r\n    // });\r\n});\r\n\r\n// CREATE NEW LIST =================\r\nrouter.post('/createList', (req, res, next) => {\r\n    new ShoppingList().save()\r\n        .then((list) => {\r\n            res.redirect(`/${list._id}`)\r\n        })\r\n        .catch(err => {\r\n            console.error(err)\r\n        })\r\n});\r\n\r\nexport default router;\r\n"]}